---
layout: post
author: "Yan"
catalog: true
subtitle: "우아한테크세미나"
header-img: "img/header/java.jpg"
title: "Java - 의존성을 이용해 설계 진화시키기"
date: 2021-12-10 11:40:08 +0000
categories:
  - Java
tags:
  - 세미나
  - OOP
  - java
comments: true
---

# 의존성을 이용해 설계 진화시키기

- 의존성을 어떻게 관리하는 것이 좋은가?
- 의존성을 어떻게 관리하느냐에 따라 설계가 어떻게 변하는지 알아보기

> 설계가 뭔가요?

- 어떤 프로젝트에, 어떤 패키지에, 어떤 클래스에 어떤 코드를 넣을 것인지 결정하는 것이다.
- 핵심은 **변경**에 초점을 맞추는 것이다. 함께 변하는 코드를 같은 클래스에 넣는 것이다.
  - 예) B가 변경될 때 A도 함께 변경되는 가능성이 있다 = A는 B에 의존한다. A는 B의 변경에 의한 영향을 받는다.
- 이것을 `의존성`이라고 부르는 것이다.

## 의존성

### 클래스 의존성의 종류

1. 연관관계 `Association`

```java
class A {
    private B b;
}
```

2. 의존관계 `Dependency`

```java
class A {
    public B method(B b) { return b;
    return new B();
    }
}
```

3. 상속관계 `Inheritance`: 구현이 바뀌더라도 영향을 받을 수 있다.

```java
class A extends B {

}
```

4. 실체화관계 `Realization`: interface의 operation signature가 바뀌었을 때만 영향을 받을 수 있다.

```java
class A implements B {

}
```

### 패키지 의존성

- 패키지에 포함된 클래스 사이의 의존성
  - 예) `package A`의 `A` 클래스가 `package B`의 `B`에 의존하고 있다 = `A` depends on `B`

## 좋은 설계의 원칙

1. 양방향 의존성을 피하라

- 양방향 의존: `class A`가 바뀔 때 `class B`도 바뀐다. `class B`가 바뀔 때 `class A`도 바뀐다.

```java
class A {
  private B b;

  public void setA (B b) {
    this.b = b;
    this.b.setA(this);
  }
}

class B {
  private A a;

  public void setA(A a){
    this.a = a;
  }
}
```

- **단뱡향 의존**을 선택하라.

```java
class A {
    private B b;

    public void setA(B b) {
        this.b = b;
    }
}

class B {

}
```

2. 다중성이 적은 방향을 선택하라.

- 일대다 관계: `A`가 `B`를 Collection으로 갖고 있다

```java
class A {
    private Collection<B> bs;
}

class B {

}
```

- **다대일 관계**: B가 A를 참조하고 있다

```java
class A {

}

class B {
    private A a;
}
```

3. 의존성이 없다면 제거하라.

4. 패키지 사이의 의존성 사이클을 제거하라.

- package사이의 양방향 의존성이 있으면 안된다.
- 설계에서 가장 중요한 것은 변경이다. 패키지간 의존성이 있다면 하나의 패키지였어야 할 것을 여러개로 나눈 꼴이 된다.

## 예제) 배달앱을 간추린 배달주문과정

### 주문 플로우

- 가게선택 => 메뉴선택 => 장바구니 담기 => 주문완료

### 가게, 메뉴 Domain

#### Domain Concept

가게 - 메뉴 - 옵션그룹 - 옵션  
![https://t1.daumcdn.net/cfile/tistory/99F504455D0B8F901C](https://t1.daumcdn.net/cfile/tistory/99F504455D0B8F901C)

#### Domain Objects

런타임에서는 아래와 같이 작동한다.  
![https://t1.daumcdn.net/cfile/tistory/997DCB345D0B8F920B](https://t1.daumcdn.net/cfile/tistory/997DCB345D0B8F920B)

### 주문 Domain

#### Domain Concept

주문 - 주문항목 - 주문옵션그룹 - 주문옵션
![https://t1.daumcdn.net/cfile/tistory/99CDAD4E5D0B8F9124](https://t1.daumcdn.net/cfile/tistory/99CDAD4E5D0B8F9124)

#### Domain Objects

런타임에서는 아래와 같이 작동한다.
![https://t1.daumcdn.net/cfile/tistory/99187D355D0B8F9219](https://t1.daumcdn.net/cfile/tistory/99187D355D0B8F9219)

### 메뉴, 주문 Domain

#### Domain Objects

![https://t1.daumcdn.net/cfile/tistory/99DC25505D0B8F9215](https://t1.daumcdn.net/cfile/tistory/99DC25505D0B8F9215)

###### reference

> [[우아한테크세미나] 190620 우아한객체지향 by 우아한형제들 개발실장 조영호님](https://www.youtube.com/watch?v=dJ5C4qRqAgA)  
> [우아한 객체지향-2019년 6월 우아한 Tech 세미나 참석 후기](https://jojoldu.tistory.com/425)
