---
layout: post
author: "Yan"
catalog: true
subtitle: "스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술"
header-img: "img/header/spring.jpg"
title: "Spring - Web application의 이해"
date: 2023-11-15 11:40:08 +0000
categories:
  - Spring
tags:
  - Spring
  - WAS
comments: true
---

# Web Server vs Web Application Server (WAS)

## 웹 서버
- Http 기반으로 동작
- 정적 리소스 제공, 기타 부가기능
- 정적 리소스 : HTML, CSS, JS, 이미지, 영상
- 예) NGINX, APACHE
- Client(사용자)로 부터 HTTP Request를 받은 후 HTML, CSS, JS 등과 같은 정적 컨텐츠들을 제공해주는 프로그램

#### 기능

- 요청에 맞게 두가지 기능 중 선택해서 제공해야 한다.
  - 정적 컨텐츠 제공: WAS를 거치지 않고 바로 자원 제공
  - 동적 컨텐츠 제공을 위한 요청 전달: 클라이언트 요청을 WAS에 보내고, WAS에서 처리한 결과를 클라이언트에게 전달

![정적웹페이지](https://velog.velcdn.com/images%2Fgillog%2Fpost%2Fcd25ef1d-e78c-4e60-add6-c1bdcb1d9245%2F1.png)

## 웹 애플리케이션 서버 WAS
-  Http 기반으로 동작
- 웹 서버 기능 포함함 (정적 리소스 제공 가능)
- 프로그램 코드를 실행해서 애플리케이션 로직 수행
	-  동적 HTML, HTTP API(JSON)
	- 서블릿, JSP, 스프링 MVC'
- 예) TOMCAT, JETTY, UNDERTOW
- WAS는 웹 서버와 웹 컨테이너가 결합한 형태라고 볼 수 있다. 웹 서버의 기능들을 구조적으로 분리하여 처리하는 역할을 한다.
- 웹 컨테이너는 클라이언트 요청에 내부 로직을 통해 결과를 처리하고 동적 컨텐츠를 생성해 클라이언트에게 응답 해주는 역할을 수행한다.

#### 기능

- 프로그램 실행 환경 및 DB 접속 기능 제공
- 여러 트랜잭션 관리 기능
- 업무를 처리하는 비즈니스 로직 수행


### 웹서버와 웹 애플리케이션 서버의 차이

- 웹 서버는 정적리소스(파일) 
- WAS는 애플리케이션 로직
- 자바는 서블릿 컨테이너 기능을 제공하면 WAS
- WAS는 애플리케이션 코드를 실행하는 데 더 특화되어 있음

### 웹 시스템 구성을 WAS와 DB로 하면

- WAS가 너무 많은 역할을 담당해 서버가 과부화 될 우려가 있음
- 정적 리소스때문에 가장 비싼 애플리케이션 로직 수행이 어려워질 수 있음
- WAS장애시 오류 화면도 노출이 불가능 함

### 웹 시스템 구성을 WEB, WAS, DB로 하면

- 정적 리소스는 웹 서버가 처리
- 웹 서버는 애플리케이션 로직 같이 동적인 처리가 필요하면 WAS에 요청을 위임한다.

![Web Service Architecture](https://velog.velcdn.com/images%2Fgillog%2Fpost%2Ff912a8a2-add1-41ae-8dff-02e944992856%2Fweb-service-architecture.png)

- WAS는 중요한 태플리케이션 로직만 전담 처리할 수 있다는 장점이 있다.
- 시스템 리소스를 효율적으로 관리할 수 있다.
  - 정적 리소스가 많이 사용되면 WEB서버를 증설하면 되고, 애플리케이션 리소스가 많이 사용되면 WAS를 증설하면 된다.
  
## 서버에서 처리해야 하는 업무와 서블릿의 역할

서블릿은 아래의 업무 중 7번을 제외한 업무를 모두 지원한다.

1. 서버 TCP/IP 대기, 소켓 연결
2. HTTP 요청 메세지를 파싱해서 읽기
3. POST 방식, /save URL 인지
4. Content-Type 확인
5. HTTP 메시지 바디 내용 파싱
- username, age 데이터를 사용할 수 있게 파싱
6. 저장 프로세스 실행
7. 비즈니스 로직 실행
- 데이터베이스에 저장 요청
7. HTTP 응답 메시지 생성 시작
- HTTP 시작 라인 생성
- Header 생성
- 메시지 바디에 HTML 생성해서 입력
8. TCP/IP에 응답 전달, 소켓 종료

### 서블릿

```java
@WebServlet(name = "helloServlet", urlPatterns = "/hello")
public class HelloServlet extends HttpServlet {

  @Override
  protectd void service(HttpServletRequest respuest, HttpServletResponse) {
    //애플리케이션 로직
  }
}
```
- urlPatterns(/hello)의 URL이 호출되면 서블릿 코드가 실행
- HTTP 요청 정보를 편리하게 사용할 수 있는 HttpServletRequest
- HTTP 응답 정보를 편리학게 제공할 수 있는 HttpServletResponse
- 개발자는 HTTP 스펙을 매우 편리하게 사용할 수 있다.

###### reference

> [스프링 MVC 1편 - 백엔드 웹 개발 핵심 기술](https://inf.run/Gmptq)
> [Web Server와 Web Application Server](https://velog.io/@gillog/Web-Server%EC%99%80-Web-Application-Server%EC%9D%98-%EC%B0%A8%EC%9D%B4) 