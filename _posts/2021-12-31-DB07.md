---
layout: post
author: "Yan"
catalog: true
subtitle: "SQLD"
header-img: "img/header/sql.jpg"
title: "DB - 토스뱅크 데이터 설계사상"
date: 2021-12-31 11:40:08 +0000
categories:
  - SQL
tags:
  - SQL
  - DB
  - 데이터
comments: true
---

# 토스 SLASH

## 토스뱅크 데이터 설계사상

1. 테이블의 통합과 분리
2. 순환 참조 활용
3. 테이블 종류의 체계적 관리
4. 비대면 대량 거래 설계
5. 성능 최적화 설계

### 1. 테이블의 통합과 분리

#### 테이블을 분리한 경우

##### `대출외부심사내역`과 `카드외부심사내역`

- 대출: `대출기본` - `대출외부심사내역` -> 신용평가사 KCB, CIS, NICE로 연계
- 카드: `카드기본` - `카드외부심사내역` -> 신용평가사 KCB, CIS, NICE로 연계
- 분리한 이유: 심사내역이 달라서 통합해서 사용하기 어려웠음

#### 테이블을 통합하여 관리한 경우

##### `대출/카드 연체원장`

- `대출/카드 연체원장` -> `경매/소송 기본` | `회생/파생 원장` | `신용회복원장`

- 통합한 이유: 연체금액, 연체일 등 공통적인 항목이 많았음.
  - 법적 절차 테이블은 고객별 데이터라서 통합하는 것이 더 효율적.

##### `보증`

- 업무별: `심사`, `청약`, `보상`
- 상품별: `중금리`, `마이너스`, `스마트론`, `햇살론`, `전세보증` 등
- 기관별
- 통합한 이유: 테이블이 너무 많아져서 통합의 필요성 대두

**통합이 나은가? 분리가 나은가?**

- 통합: `여수신대출기본`(여신), `수신계좌기본`(수신)
- 분리: `여신대출기본` | `수신대출기본` | `마이너스통장기본`(여신) , `수신계좌기본`(수신)

#### 테이블 분리 원칙

1. OneToOne Type : 개별 테이블

- 개별 테이블로 접근이 많은 경우
- **확장성 좋음**
- **조인성능 나쁨**
- I/O량 성능 좋음
- 관리 용이성 떨어짐
- 예시) `고객`, `법인`, `개인`

2. Plus Type: 슈퍼 + 서브 타입

- 슈퍼 + 서브 형식으로 데이터를 처리하는 경우
- 확장성 보통
- **조인성능 나쁨**
- I/O량 성능 좋음
- **관리 용이성 떨어짐**
- 예시) `법인고객`, `개인고객`

3. Single Type: 단일 테이블

- 전체를 일괄적으로 처리하는 경우
- 확장성 나쁨
- 조인성능 좋음
- **I/O량 성능 나쁨**
- **관리 용이성 높음**
- 예시) `고객`
