---
layout: post
author: "Yan"
catalog: true
subtitle: "java를 조금 더 깊게 알고 싶어요"
header-img: "img/header/java.jpg"
title: "Java - JVM, JDK, JRE"
date: 2022-04-04 11:40:08 +0000
categories:
  - Java
tags:
  - JVM
  - JDK
  - JRE
  - java
comments: true
---

# JVM, JDK, JRE의 차이를 알아보자. 
![](https://cdn.programiz.com/sites/tutorial2program/files/jdk-jre-jvm.jpg)

## JVM : Java Virtual Machine
- 자바 가상 머신
- 자바 바이트코드 (.class파일)를 인터프리터와 JIT 컴파일러가 OS에 특화된 코드로 변환하여 실행
- JVM 밴더: 오라클, 아마존, Azul 등
- 특정 플랫폼에 종속적

## JRE : Java Runtime Environment
- JRE = JVM + Library
  - 핵심 라이브러리, 자바 런타임 환경에서 사용하는 프로퍼티 세팅, 리소스 파일 등을 가지고 있음
- **자바 애플리케이션을 실행**할 수 있도록 구성된 배포판
- 개발관련 도구는 제공 되지 않음(컴파일러 javac가 JRE에 포함되어 있지 x)

## JDK : Java Development Kit
- JDK = JRE + 개발에 필요한 툴
  - 개발 툴 : javadoc, jar, javap 등등
- java11부터 module system 도입. JRE를 따로 제공하지 않게 됨.
- 소스 코드 작성시 사용하는 자바 언어는 플랫폼에 독립적

# JVM의 구조
![](https://www.freecodecamp.org/news/content/images/2021/01/image-39.png)

## 클래스 로더 시스템
> 클래스 로더 시스템은 .class에서 바이트 코드를 읽고 메모리에 저장한다.

- **loading** : 클래스를 읽어오는 과정
- **linking** : 레퍼런스를 연결하는 과정
- **Initialization** : static 값들을 초기화하고 변수에 할당하는 과정

## 런타임 데이터 영역 (메모리)
![](https://tecoble.techcourse.co.kr/static/a0b18cc999920474a1852901e1e46ebf/6f641/2021-08-09-jvm-runtime-data-area-structure.png)
### method
- 클래스 수준의 정보 저장 (클래스 이름, 부모 클래스 이름, 클래스 경로, 메소드, 변수)
- JVM당 하나만 생성된다.
- 다른 영역에서도 참조 가능하다. 인스턴스 생성에 필요한 정보도 존재하기 때문에 JVM의 모든 Thread들이 Method Area를 공유한다.(공유자원)
- JVM의 다른 메모리 영역에서 해당 정보에 대한 요청이 오면, 실제 물리 메모리 주소로 변환해서 전달해준다.
- JVM 구동 시작 시에 생성되고, 종료할 때까지 유지되는 공통 영역이다.

### heap
- 객체를 저장. (공유자원)
- 코드 실행을 위한 Java로 구성된 객체 및 JRE 클래스들이 탑재된다.
- 문자열에 대한 정보를 가진 String pool, 실제 데이터를 가진 인스턴스, 배열 등이 저장된다.
- JVM당 하나만 생성된다.
- heap영역이 가진 데이터는 모든 Java Stack 영역에서 참조되어 Thread간 공유가 된다.
- heap영역이 가득 차면 OutOfMemoryError를 발생시킨다. 
- 참조되지 않는 인스턴스와 배열에 대한 정보도 얻을 수 있어, GC의 주 대상이 된다.
### stack
- 각 Thread별로 따로 할당되는 영역. 쓰레드마다 런타임 스택을 만든다. 그 안에 메소드 호출을 스택 프레임이라는 블럭으로 쌓는다. 쓰레드 종료시 런타임 스택도 사라진다.
- heap 메모리 영역보다 비교적 빠르다.
### PC (PC Counter) Register
- 쓰레드마다 쓰레드 내에서 현재 실행할 스택 프레임을 가리키는 포인터가 생성된다.

###### reference

> [더 자바, 코드를 조작하는 다양한 방법](https://www.inflearn.com/course/the-java-code-manipulation)  
> [JVM에 관하여 - Part 3, Run-Time Data Area](https://tecoble.techcourse.co.kr/post/2021-08-09-jvm-memory/)